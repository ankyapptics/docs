{
  "openapi": "3.1.0",
  "info": {
    "title": "Apptics API",
    "description": "Public API for Apptics integrations including payments, checkout, and subscriptions.",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "https://crm.apptics.ai/api/public/v1",
      "description": "Production Server"
    },
    {
      "url": "https://crm.apptics.dev/api/public/v1",
      "description": "Development Server"
    }
  ],
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "tags": [
    { "name": "Auth" },
    { "name": "Checkout" },
    { "name": "Payments" },
    { "name": "Block Rules" },
    { "name": "Plugins" },
    { "name": "Domains" },
    { "name": "Orders" },
    { "name": "Subscriptions" },
    { "name": "Products" },
    { "name": "Events" },
    { "name": "Customers" },
    { "name": "Payment Instruments" },
    { "name": "Stores" }
  ],
  "paths": {
    "/auth/test": {
      "post": {
        "tags": ["Auth"],
        "summary": "Test authentication",
        "description": "Test if the API key is valid and return user information.",
        "operationId": "testAuthentication",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {},
                "example": {}
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful authentication",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          }
        }
      }
    },
    "/checkout/init": {
      "get": {
        "tags": ["Checkout"],
        "summary": "Initialize checkout session",
        "description": "Initialize a checkout session and automatically redirect to the checkout URL. This endpoint works exactly like the current CMS checkout-init page - you can navigate to it with query parameters and it will automatically redirect the browser to the checkout page.\n\nPerfect for direct links, email links, or anywhere you want automatic redirection.\n\n**This endpoint is completely public and requires no authentication.**\n\nExample usage:\n```\nGET /api/public/v1/checkout/init?storeId=store_123&items=[{\"variantId\":\"var_123\",\"quantity\":1}]&currency=USD\nâ†’ Redirects to: [https://checkout.apptics.ai/checkout/ch_abc123/op?token=cms_token_xyz](https://checkout.apptics.ai/checkout/ch_abc123/op?token=cms_token_xyz)\n```",
        "operationId": "initializeCheckoutSession",
        "parameters": [
          { "name": "data", "in": "query", "schema": { "type": "string" } },
          { "name": "storeId", "in": "query", "schema": { "type": "string" } },
          { "name": "items", "in": "query", "schema": { "type": "string" } },
          { "name": "currency", "in": "query", "schema": { "type": "string" } },
          { "name": "locale", "in": "query", "schema": { "type": "string" } },
          { "name": "cartToken", "in": "query", "schema": { "type": "string" } },
          { "name": "returnUrl", "in": "query", "schema": { "type": "string" } },
          { "name": "cid", "in": "query", "schema": { "type": "string" } }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string",
                  "example": "HTTP 302 Redirect to: https://checkout.apptics.ai/checkout/ch_abc123/op?token=cms_token_xyz"
                }
              }
            }
          }
        }
      }
    },
    "/checkout/pay-v2": {
      "post": {
        "tags": ["Checkout"],
        "summary": "Pay checkout session V2",
        "description": "Pay for a checkout session with enhanced control over payment initiation.\n\nThis V2 endpoint provides additional parameters:\n- initiatedBy: Specify whether payment was initiated by 'customer' (default) or 'merchant'\n- source: Specify the payment source, defaults to 'checkout'\n\nThese parameters are used for tracking and analytics purposes.",
        "operationId": "payCheckoutSessionV2",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "checkoutSessionId": { "type": "string" },
                  "paymentInstrumentId": { "type": "string" },
                  "returnUrl": { "type": "string" },
                  "metadata": { 
                    "type": "object",
                    "additionalProperties": {},
                    "default": {}
                  },
                  "draft": { 
                    "type": "boolean",
                    "default": false
                  },
                  "initiatedBy": {
                    "type": "string",
                    "enum": ["customer", "merchant"],
                    "default": "customer"
                  },
                  "source": {
                    "type": "string",
                    "enum": ["upsell", "checkout", "offer", "missing_club", "forced"],
                    "default": "checkout"
                  }
                },
                "required": ["checkoutSessionId"],
                "additionalProperties": false
              },
              "examples": {
                "basic": {
                  "summary": "Basic payment",
                  "value": {
                    "checkoutSessionId": "ch_1234567890",
                    "paymentInstrumentId": "pi_1234567890"
                  }
                },
                "withParameters": {
                  "summary": "Payment with custom parameters",
                  "value": {
                    "checkoutSessionId": "ch_1234567890",
                    "paymentInstrumentId": "pi_1234567890",
                    "initiatedBy": "customer",
                    "source": "checkout",
                    "returnUrl": "https://mystore.com/success"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {},
                "examples": {
                  "success": {
                    "summary": "Successful payment",
                    "value": {
                      "order": {
                        "id": "ord_1234567890",
                        "status": "paid",
                        "totalAmount": 2999,
                        "currency": "USD"
                      },
                      "payment": {
                        "id": "pay_1234567890",
                        "status": "succeeded",
                        "amount": 2999,
                        "currency": "USD"
                      },
                      "redirectUrl": "https://mystore.com/thankyou/ord_1234567890"
                    }
                  }
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/error"
          }
        },
        "security": [
          { "bearerAuth": [] }
        ]
      }
    },
    "/payments": {
      "post": {
        "tags": ["Payments"],
        "summary": "List payments with transactions",
        "description": "List and filter payments with their associated transactions. Supports pagination, sorting, and advanced filtering options.\n\nSupported filters:\n- Store IDs\n- Payment status and sub-status\n- Currency and amount\n- Card details (last4, brand, expiry)\n- Customer information (email, name)\n- Date ranges\n- Dispute status and type",
        "operationId": "listPaymentsWithTransactions",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "pagination": {
                    "type": "object",
                    "properties": {
                      "page": { "type": "number" },
                      "pageSize": { "type": "number" }
                    },
                    "required": ["page", "pageSize"],
                    "additionalProperties": false
                  },
                  "useCursor": { "type": "boolean", "default": false },
                  "cursor": { "type": "string" },
                  "sortBy": {
                    "type": "object",
                    "properties": {
                      "field": {
                        "type": "string",
                        "enum": ["id", "accountId", "createdAt", "updatedAt"]
                      },
                      "direction": {
                        "type": "string",
                        "enum": ["asc", "desc"]
                      }
                    },
                    "required": ["field", "direction"],
                    "additionalProperties": false
                  },
                  "filters": {
                    "type": "object",
                    "properties": {
                      "storeIds": {
                        "type": "array",
                        "items": { "type": "string" }
                      },
                      "initiatedBy": {
                        "type": "string",
                        "enum": ["customer", "merchant"]
                      },
                      "status": {
                        "type": "string",
                        "enum": ["pending", "succeeded", "error", "refunded", "declined", "expired", "rejected"]
                      },
                      "currency": {
                        "type": "array",
                        "items": { "type": "string" }
                      },
                      "customer": {
                        "type": "object",
                        "properties": {
                          "fullName": { "type": "string" },
                          "email": { "type": "string" }
                        },
                        "additionalProperties": false
                      }
                    },
                    "additionalProperties": false
                  }
                }
              },
              "examples": {
                "basic": {
                  "summary": "Basic pagination",
                  "value": {
                    "pagination": {
                      "page": 1,
                      "pageSize": 20
                    }
                  }
                },
                "sorting": {
                  "summary": "Sorting example",
                  "value": {
                    "pagination": { "page": 1, "pageSize": 20 },
                    "sortBy": { "field": "createdAt", "direction": "desc" }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {},
                "examples": {
                  "success": {
                    "summary": "Successful response",
                    "value": {
                      "payments": [
                        {
                          "id": "pay_123xyz",
                          "amount": 2999,
                          "currency": "USD",
                          "status": "succeeded",
                          "createdAt": "2024-03-20T10:30:00Z"
                        }
                      ],
                      "total": 1,
                      "pageCount": 1
                    }
                  }
                }
              }
            }
          },
          "default": { "$ref": "#/components/responses/error" }
        },
        "security": [
          { "bearerAuth": [] }
        ]
      }
    },
    "/payments/{paymentId}": {
      "get": {
        "tags": ["Payments"],
        "summary": "Get payment by ID",
        "description": "Retrieve detailed information about a specific payment including transactions and customer data",
        "operationId": "getPaymentById",
        "parameters": [
          {
            "name": "paymentId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {},
                "examples": {
                  "success": {
                    "summary": "Payment details",
                    "value": {
                      "id": "pay_123",
                      "amount": 2999,
                      "currency": "USD",
                      "status": "succeeded",
                      "createdAt": "2024-03-20T10:30:00Z",
                      "customer": {
                        "id": "cus_456",
                        "email": "john@example.com",
                        "firstName": "John",
                        "lastName": "Doe"
                      },
                      "transactions": [
                        {
                          "id": "txn_789",
                          "type": "purchase",
                          "status": "succeeded",
                          "amount": 2999,
                          "currency": "USD"
                        }
                      ],
                      "paymentInstrument": {
                        "type": "card",
                        "card": {
                          "last4": "4242",
                          "brand": "visa",
                          "expYear": 2025,
                          "expMonth": 12
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "default": { "$ref": "#/components/responses/error" }
        },
        "security": [
          { "bearerAuth": [] }
        ]
      }
    },
    "/payments/process": {
      "post": {
        "tags": ["Payments"],
        "summary": "Process payment",
        "description": "Process a payment using the payment flow system with comprehensive options for different payment scenarios.",
        "operationId": "processPayment",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "orderId": { "type": "string" },
                  "paymentInstrumentId": { "type": "string" },
                  "mode": {
                    "type": "string",
                    "enum": ["purchase", "auth", "capture"],
                    "default": "purchase"
                  },
                  "amount": { 
                    "type": "number",
                    "minimum": 0,
                    "exclusiveMinimum": true
                  },
                  "currency": { "type": "string" },
                  "storeId": { "type": "string" },
                  "customerId": { "type": "string" },
                  "initiatedBy": {
                    "type": "string",
                    "enum": ["customer", "merchant"],
                    "default": "customer"
                  },
                  "reasonType": {
                    "type": "string",
                    "enum": ["recurring", "unscheduled", "installment"]
                  },
                  "returnUrl": { 
                    "type": "string", 
                    "format": "uri" 
                  },
                  "draft": { 
                    "type": "boolean",
                    "default": false
                  },
                  "isRetry": { 
                    "type": "boolean",
                    "default": false
                  },
                  "threedsSessionId": { "type": "string" },
                  "subscriptionId": { "type": "string" },
                  "paymentFlowId": { "type": "string" },
                  "paymentId": { "type": "string" }
                },
                "required": ["amount", "currency", "storeId"],
                "additionalProperties": false
              },
              "examples": {
                "basic": {
                  "summary": "Basic payment processing",
                  "value": {
                    "paymentInstrumentId": "pi_123",
                    "amount": 2999,
                    "currency": "USD",
                    "storeId": "store_123",
                    "customerId": "cus_456",
                    "mode": "purchase"
                  }
                },
                "subscription": {
                  "summary": "Subscription payment",
                  "value": {
                    "paymentInstrumentId": "pi_123",
                    "amount": 2999,
                    "currency": "USD",
                    "storeId": "store_123",
                    "customerId": "cus_456",
                    "mode": "purchase",
                    "initiatedBy": "merchant",
                    "reasonType": "recurring",
                    "subscriptionId": "sub_123",
                    "isRetry": true
                  }
                },
                "order": {
                  "summary": "Order payment",
                  "value": {
                    "orderId": "ord_123",
                    "paymentInstrumentId": "pi_123",
                    "amount": 2999,
                    "currency": "USD",
                    "storeId": "store_123",
                    "customerId": "cus_456",
                    "mode": "purchase",
                    "returnUrl": "https://example.com/return"
                  }
                },
                "withCustomFlow": {
                  "summary": "Payment with custom flow",
                  "value": {
                    "paymentInstrumentId": "pi_123",
                    "amount": 2999,
                    "currency": "USD",
                    "storeId": "store_123",
                    "customerId": "cus_456",
                    "mode": "purchase",
                    "paymentFlowId": "flow_custom_abc123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {},
                "examples": {
                  "success": {
                    "summary": "Successful payment processing",
                    "value": {
                      "payment": {
                        "id": "pay_123",
                        "amount": 2999,
                        "currency": "USD",
                        "status": "succeeded",
                        "subStatus": "approved",
                        "requireAction": "none"
                      }
                    }
                  }
                }
              }
            }
          },
          "default": { "$ref": "#/components/responses/error" }
        },
        "security": [
          { "bearerAuth": [] }
        ]
      }
    },
    "/payments/refund": {
      "post": {
        "tags": ["Payments"],
        "summary": "Refund payment",
        "description": "Process a full or partial refund for a payment",
        "operationId": "refundPayment",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "paymentIds": {
                    "type": "array",
                    "items": { "type": "string" }
                  },
                  "amount": { "type": "number" },
                  "refundAll": { "type": "boolean" },
                  "metadata": {
                    "type": "object",
                    "additionalProperties": { "type": "string" }
                  },
                  "cancelSubscription": { "type": "boolean" },
                  "dispute": {
                    "type": "object",
                    "properties": {
                      "disputeStatus": {
                        "type": "string",
                        "enum": [
                          "response-needed", "under-review", "forfeited", "won", 
                          "lost", "unknown", "refunded", "refunded_externally"
                        ]
                      },
                      "disputeType": {
                        "type": "string",
                        "enum": [
                          "information-request", "first-chargeback", "second-chargeback", 
                          "fraud", "ethoca-alert", "verifi-alert", "paypal-claim", 
                          "representment", "rdr"
                        ]
                      },
                      "disputeReasonCode": {
                        "type": "string",
                        "enum": [
                          "0", "00", "1", "2", "3", "4", "5", "6", "7", "8", "9", 
                          "10.1", "10.2", "10.3", "10.4", "10.5", "11.1", "11.2", "11.3", 
                          "12", "12.1", "12.2", "12.3", "12.4", "12.5", "12.6", "12.7", 
                          "13.1", "13.2", "13.3", "13.4", "13.5", "13.6", "13.7", "13.8", "13.9", 
                          "30", "31", "34", "35", "37", "40", "41", "42", "46", "47", "49", 
                          "50", "51", "53", "54", "55", "57", "59", "60", "62", "63", 
                          "70", "71", "72", "73", "74", "75", "76", "77", "78", "79", 
                          "80", "81", "82", "83", "85", "86", "93", "98", "1000", 
                          "2700", "2702", "A", "A01", "A02", "A08", "AL", "AP", "AW", "B", 
                          "C02", "C04", "C05", "C08", "C14", "C18", "C28", "C31", "C32", "CA", "CD", "CR", 
                          "DA", "DP", "DP1", "EX", "F10", "F14", "F22", "F24", "F29", "FR1", "FR4", "FR6", 
                          "IC", "IN", "IS", "LP", "M01", "M10", "M49", "N", "NA", "NC", 
                          "P", "P01", "P03", "P04", "P05", "P07", "P08", "P22", "P23", 
                          "R03", "R13", "RG", "RM", "RN1", "RN2", "SV", "TF", "TNM", 
                          "UA01", "UA02", "UA03", "UA10", "UA11", "UA12", "UA18", 
                          "UA20", "UA21", "UA22", "UA23", "UA28", "UA30", "UA31", "UA32", "UA38", "UA99", 
                          "bank_cannot_process", "credit_not_processed", "customer_initiated", 
                          "debit_not_authorized", "duplicate", "fraudulent", "general", 
                          "incorrect_account_details", "insufficient_funds", "pre-chargeback-alert", 
                          "product_not_received", "product_unacceptable", "subscription_canceled", 
                          "unrecognized"
                        ]
                      },
                      "disputedTransactionId": { "type": "string" },
                      "disputeNote": { "type": "string" }
                    },
                    "required": ["disputeStatus", "disputeType", "disputeReasonCode"],
                    "additionalProperties": false
                  },
                  "blacklistCustomer": { "type": "boolean" }
                },
                "required": ["paymentIds"],
                "additionalProperties": false
              },
              "examples": {
                "full": {
                  "summary": "Full refund",
                  "value": {
                    "paymentIds": ["pay_123xyz"],
                    "refundAll": true,
                    "metadata": {
                      "reason": "Customer request",
                      "initiatedBy": "merchant"
                    }
                  }
                },
                "partial": {
                  "summary": "Partial refund",
                  "value": {
                    "paymentIds": ["pay_123xyz"],
                    "amount": 1500,
                    "metadata": {
                      "reason": "Partial return",
                      "initiatedBy": "merchant"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {},
                "examples": {
                  "success": {
                    "summary": "Successful refund",
                    "value": {
                      "id": "pay_123xyz",
                      "refundedAmount": 1500,
                      "status": "partially_refunded",
                      "refund": {
                        "id": "ref_456",
                        "amount": 1500,
                        "currency": "USD",
                        "status": "succeeded",
                        "createdAt": "2024-03-20T10:30:00Z"
                      }
                    }
                  }
                }
              }
            }
          },
          "default": { "$ref": "#/components/responses/error" }
        },
        "security": [
          { "bearerAuth": [] }
        ]
      }
    },
    "/payments/mark-disputed": {
      "post": {
        "tags": ["Payments"],
        "summary": "Mark payment as disputed",
        "description": "Mark a payment as disputed with initial dispute information. This endpoint is used to initiate a dispute on a payment.",
        "operationId": "markPaymentAsDisputed",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "paymentId": { "type": "string" },
                  "disputeStatus": {
                    "type": "string",
                    "enum": ["response-needed", "under-review", "forfeited", "won", "lost", "unknown", "refunded", "refunded_externally"]
                  },
                  "disputeType": {
                    "type": "string",
                    "enum": ["information-request", "first-chargeback", "second-chargeback", "fraud", "ethoca-alert", "verifi-alert", "paypal-claim", "representment", "rdr"]
                  },
                  "disputeReasonCode": {
                    "type": "string",
                    "enum": [
                      "0", "00", "1", "2", "3", "4", "5", "6", "7", "8", "9", 
                      "10.1", "10.2", "10.3", "10.4", "10.5", "11.1", "11.2", "11.3", 
                      "12", "12.1", "12.2", "12.3", "12.4", "12.5", "12.6", "12.7", 
                      "13.1", "13.2", "13.3", "13.4", "13.5", "13.6", "13.7", "13.8", "13.9", 
                      "30", "31", "34", "35", "37", "40", "41", "42", "46", "47", "49", 
                      "50", "51", "53", "54", "55", "57", "59", "60", "62", "63", 
                      "70", "71", "72", "73", "74", "75", "76", "77", "78", "79", 
                      "80", "81", "82", "83", "85", "86", "93", "98", "1000", 
                      "2700", "2702", "A", "A01", "A02", "A08", "AL", "AP", "AW", "B", 
                      "C02", "C04", "C05", "C08", "C14", "C18", "C28", "C31", "C32", "CA", "CD", "CR", 
                      "DA", "DP", "DP1", "EX", "F10", "F14", "F22", "F24", "F29", "FR1", "FR4", "FR6", 
                      "IC", "IN", "IS", "LP", "M01", "M10", "M49", "N", "NA", "NC", 
                      "P", "P01", "P03", "P04", "P05", "P07", "P08", "P22", "P23", 
                      "R03", "R13", "RG", "RM", "RN1", "RN2", "SV", "TF", "TNM", 
                      "UA01", "UA02", "UA03", "UA10", "UA11", "UA12", "UA18", 
                      "UA20", "UA21", "UA22", "UA23", "UA28", "UA30", "UA31", "UA32", "UA38", "UA99", 
                      "bank_cannot_process", "credit_not_processed", "customer_initiated", 
                      "debit_not_authorized", "duplicate", "fraudulent", "general", 
                      "incorrect_account_details", "insufficient_funds", "pre-chargeback-alert", 
                      "product_not_received", "product_unacceptable", "subscription_canceled", 
                      "unrecognized"
                    ]
                  },
                  "disputedTransactionId": { "type": "string" },
                  "disputeNote": { "type": "string" }
                },
                "required": ["paymentId", "disputeStatus", "disputeType", "disputeReasonCode"],
                "additionalProperties": false
              },
              "examples": {
                "basic": {
                  "summary": "Basic dispute creation",
                  "value": {
                    "paymentId": "pay_123xyz",
                    "disputeStatus": "response-needed",
                    "disputeType": "first-chargeback",
                    "disputeReasonCode": "fraudulent",
                    "disputedTransactionId": "txn_123",
                    "disputeNote": "Customer claims unauthorized transaction"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {},
                "examples": {
                  "success": {
                    "summary": "Successful response",
                    "value": {
                      "id": "pay_123xyz",
                      "isDisputed": true,
                      "disputeStatus": "response-needed",
                      "disputeType": "first-chargeback",
                      "disputeReasonCode": "fraudulent",
                      "disputedTransactionId": "txn_123",
                      "disputedAt": "2024-03-20T10:30:00Z",
                      "disputeNote": "Customer claims unauthorized transaction"
                    }
                  }
                }
              }
            }
          },
          "default": { "$ref": "#/components/responses/error" }
        },
        "security": [
          { "bearerAuth": [] }
        ]
      }
    },
    "/payments/dispute": {
      "post": {
        "tags": ["Payments"],
        "summary": "Update payment dispute status",
        "description": "Update the dispute status of a payment. Supports various dispute statuses including RDR (Rapid Dispute Resolution) and Alert notifications.\n\nAvailable dispute statuses:\n- response-needed: Requires merchant response\n- under-review: Currently being reviewed\n- forfeited: Dispute forfeited\n- won: Dispute won by merchant\n- lost: Dispute lost by merchant\n- unknown: Status unknown\n- rdr: Rapid Dispute Resolution - expedited dispute handling\n- alert: Alert notification",
        "operationId": "updatePaymentDisputeStatus",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "paymentId": { "type": "string" },
                  "disputeStatus": {
                    "type": "string",
                    "enum": ["response-needed", "under-review", "forfeited", "won", "lost", "unknown", "refunded", "refunded_externally"]
                  },
                  "disputeType": {
                    "type": "string",
                    "enum": ["information-request", "first-chargeback", "second-chargeback", "fraud", "ethoca-alert", "verifi-alert", "paypal-claim", "representment", "rdr"]
                  },
                  "disputeReasonCode": {
                    "type": "string",
                    "enum": [
                      "0", "00", "1", "2", "3", "4", "5", "6", "7", "8", "9", 
                      "10.1", "10.2", "10.3", "10.4", "10.5", "11.1", "11.2", "11.3", 
                      "12", "12.1", "12.2", "12.3", "12.4", "12.5", "12.6", "12.7", 
                      "13.1", "13.2", "13.3", "13.4", "13.5", "13.6", "13.7", "13.8", "13.9", 
                      "30", "31", "34", "35", "37", "40", "41", "42", "46", "47", "49", 
                      "50", "51", "53", "54", "55", "57", "59", "60", "62", "63", 
                      "70", "71", "72", "73", "74", "75", "76", "77", "78", "79", 
                      "80", "81", "82", "83", "85", "86", "93", "98", "1000", 
                      "2700", "2702", "A", "A01", "A02", "A08", "AL", "AP", "AW", "B", 
                      "C02", "C04", "C05", "C08", "C14", "C18", "C28", "C31", "C32", "CA", "CD", "CR", 
                      "DA", "DP", "DP1", "EX", "F10", "F14", "F22", "F24", "F29", "FR1", "FR4", "FR6", 
                      "IC", "IN", "IS", "LP", "M01", "M10", "M49", "N", "NA", "NC", 
                      "P", "P01", "P03", "P04", "P05", "P07", "P08", "P22", "P23", 
                      "R03", "R13", "RG", "RM", "RN1", "RN2", "SV", "TF", "TNM", 
                      "UA01", "UA02", "UA03", "UA10", "UA11", "UA12", "UA18", 
                      "UA20", "UA21", "UA22", "UA23", "UA28", "UA30", "UA31", "UA32", "UA38", "UA99", 
                      "bank_cannot_process", "credit_not_processed", "customer_initiated", 
                      "debit_not_authorized", "duplicate", "fraudulent", "general", 
                      "incorrect_account_details", "insufficient_funds", "pre-chargeback-alert", 
                      "product_not_received", "product_unacceptable", "subscription_canceled", 
                      "unrecognized"
                    ]
                  },
                  "disputedTransactionId": { "type": "string" },
                  "disputeNote": { "type": "string" }
                },
                "required": ["paymentId"],
                "additionalProperties": false
              },
              "examples": {
                "rdr": {
                  "summary": "Update to RDR type",
                  "value": {
                    "paymentId": "pay_123xyz",
                    "disputeStatus": "under-review",
                    "disputeType": "rdr",
                    "disputeReasonCode": "fraudulent",
                    "metadata": {
                      "reason": "Rapid dispute resolution initiated",
                      "amount": 2999,
                      "resolutionType": "pre_dispute_resolution"
                    }
                  }
                },
                "alert": {
                  "summary": "Update to Alert type",
                  "value": {
                    "paymentId": "pay_123xyz",
                    "disputeStatus": "under-review",
                    "disputeType": "ethoca-alert",
                    "disputeReasonCode": "fraudulent",
                    "metadata": {
                      "alertType": "fraud_suspicious",
                      "description": "Suspicious activity detected"
                    }
                  }
                },
                "standard": {
                  "summary": "Standard dispute update",
                  "value": {
                    "paymentId": "pay_123xyz",
                    "disputeStatus": "under-review",
                    "disputeType": "first-chargeback",
                    "disputeReasonCode": "fraudulent",
                    "metadata": {
                      "reason": "Customer dispute",
                      "amount": 2999
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {},
                "examples": {
                  "success": {
                    "summary": "Successful response",
                    "value": {
                      "id": "pay_123xyz",
                      "disputeStatus": "under-review",
                      "disputeType": "rdr",
                      "disputeReasonCode": "fraudulent",
                      "updatedAt": "2024-03-20T10:30:00Z",
                      "metadata": {
                        "reason": "Rapid dispute resolution initiated",
                        "amount": 2999,
                        "resolutionType": "pre_dispute_resolution"
                      }
                    }
                  }
                }
              }
            }
          },
          "default": { "$ref": "#/components/responses/error" }
        },
        "security": [
          { "bearerAuth": [] }
        ]
      }
    },
    "/payments/currencies": {
      "post": {
        "tags": ["Payments"],
        "summary": "Get payment currencies",
        "description": "Get all currencies used in payments for the authenticated account",
        "operationId": "getPaymentCurrencies",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {},
                "additionalProperties": false
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {},
                "examples": {
                  "success": {
                    "summary": "Available currencies",
                    "value": {
                      "currencies": ["USD", "EUR", "GBP", "CAD"]
                    }
                  }
                }
              }
            }
          },
          "default": { "$ref": "#/components/responses/error" }
        },
        "security": [
          { "bearerAuth": [] }
        ]
      }
    },
    "/payments/processors": {
      "post": {
        "tags": ["Payments"],
        "summary": "Get available processors",
        "description": "Get all enabled payment processors for the authenticated account",
        "operationId": "getAvailableProcessors",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {},
                "additionalProperties": false
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {},
                "examples": {
                  "success": {
                    "summary": "Available processors",
                    "value": {
                      "processors": [
                        {
                          "id": "proc_stripe",
                          "name": "Stripe",
                          "type": "stripe"
                        },
                        {
                          "id": "proc_paypal",
                          "name": "PayPal",
                          "type": "paypal"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "default": { "$ref": "#/components/responses/error" }
        },
        "security": [
          { "bearerAuth": [] }
        ]
      }
    },
    "/payments/void": {
      "post": {
        "tags": ["Payments"],
        "summary": "Void payment",
        "description": "Void an authorized payment transaction. This cancels a previously authorized payment before it has been captured.\n\nImportant notes:\n- Only works for payments with 'authorized' status\n- Must be performed before the payment is captured\n- Once voided, the authorization is released and funds are no longer held\n- Cannot be undone once voided\n\nCommon error codes:\n- PAYMENT_NOT_FOUND: The specified payment does not exist\n- TRANSACTION_NOT_AUTHORIZE: The payment is not in authorized status\n- TRANSACTION_NO_PROCESSOR: No processor found for the transaction\n- TRANSACTION_VOID_FAILED: The void operation failed at the processor level",
        "operationId": "voidPayment",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "paymentId": { "type": "string" }
                },
                "required": ["paymentId"],
                "additionalProperties": false
              },
              "examples": {
                "basic": {
                  "summary": "Void authorized payment",
                  "value": {
                    "paymentId": "pay_123xyz"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {},
                "examples": {
                  "success": {
                    "summary": "Successful void",
                    "value": {
                      "id": "pay_123xyz",
                      "status": "failed",
                      "subStatus": "voided",
                      "amount": 2999,
                      "currency": "USD",
                      "voidedAt": "2024-03-20T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "default": { "$ref": "#/components/responses/error" }
        },
        "security": [
          { "bearerAuth": [] }
        ]
      }
    },
    "/block-rules": {
      "get": {
        "tags": ["Block Rules"],
        "summary": "List block rules",
        "responses": {
          "200": { "description": "List of block rules" }
        }
      }
    },
    "/plugins": {
      "get": {
        "tags": ["Plugins"],
        "summary": "List plugins",
        "responses": {
          "200": { "description": "List of plugins" }
        }
      }
    },
    "/domains": {
      "get": {
        "tags": ["Domains"],
        "summary": "List domains",
        "responses": {
          "200": { "description": "List of domains" }
        }
      }
    },
    "/orders": {
      "get": {
        "tags": ["Orders"],
        "summary": "List orders",
        "responses": {
          "200": { "description": "List of orders" }
        }
      }
    },
    "/subscriptions": {
      "get": {
        "tags": ["Subscriptions"],
        "summary": "List subscriptions",
        "responses": {
          "200": { "description": "List of subscriptions" }
        }
      }
    },
    "/products": {
      "get": {
        "tags": ["Products"],
        "summary": "List products",
        "responses": {
          "200": { "description": "List of products" }
        }
      }
    },
    "/events": {
      "get": {
        "tags": ["Events"],
        "summary": "List events",
        "responses": {
          "200": { "description": "List of events" }
        }
      }
    },
    "/customers": {
      "get": {
        "tags": ["Customers"],
        "summary": "List customers",
        "responses": {
          "200": { "description": "List of customers" }
        }
      }
    },
    "/payment-instruments": {
      "get": {
        "tags": ["Payment Instruments"],
        "summary": "List payment instruments",
        "responses": {
          "200": { "description": "List of payment instruments" }
        }
      }
    },
    "/stores": {
      "get": {
        "tags": ["Stores"],
        "summary": "List stores",
        "responses": {
          "200": { "description": "List of stores" }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "Enter your API key as: `Bearer <your-api-key>`"
      }
    },
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean", "example": true },
          "user": {
            "type": "object",
            "properties": {
              "id": { "type": "string", "example": "user_123" },
              "orgId": { "type": "string", "example": "org_456" },
              "permissions": { "type": "array", "items": { "type": "string" }, "example": ["org:admin"] },
              "account": {
                "type": "object",
                "properties": {
                  "id": { "type": "string", "example": "acc_789" },
                  "name": { "type": "string", "example": "My Account" }
                }
              },
              "isServiceAccount": { "type": "boolean", "example": false },
              "isAccountOwner": { "type": "boolean", "example": true }
            }
          }
        }
      }
    },
    "responses": {
      "error": {
        "description": "Error response",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "message": { "type": "string" },
                "code": { "type": "string" },
                "issues": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "message": { "type": "string" }
                    },
                    "required": ["message"],
                    "additionalProperties": false
                  }
                }
              },
              "required": ["message", "code"],
              "additionalProperties": false
            }
          }
        }
      }
    }
  }
}